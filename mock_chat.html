<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChatMe - Mock</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .message-bubble { max-width: 75%; width: fit-content; border-radius: 18px; padding: 10px 14px; position: relative; }
        .message-contact { background-color: #ffffff; color: #1e293b; border-bottom-left-radius: 4px; }
        .message-agent { background-color: #7c3aed; color: white; border-bottom-right-radius: 4px; }
        .message-timestamp { float: right; font-size: 0.65rem; margin-left: 8px; margin-top: 10px; }
    </style>
    <script>
        // Mock functions for verification
        function toggleCrmSidebar() {
            const sidebar = document.getElementById('crm-sidebar');
            sidebar.classList.toggle('hidden');
        }

        function saveCrmField(field) {
            Swal.fire({
                toast: true,
                position: 'top-end',
                icon: 'success',
                title: 'Notes Updated Successfully',
                showConfirmButton: false,
                timer: 2000
            });
            const notesValue = document.getElementById('crm-notes').value;
            updateNotesBadge(notesValue);
        }

        function updateNotesBadge(notesContent) {
            const crmToggleButton = document.querySelector('button[onclick*="toggleCrmSidebar"]');
            let badge = crmToggleButton.querySelector('.notes-badge');

            if (notesContent && notesContent.trim() !== '') {
                if (!badge) {
                    badge = document.createElement('span');
                    badge.className = 'notes-badge absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full border-2 border-white';
                    crmToggleButton.classList.add('relative');
                    crmToggleButton.appendChild(badge);
                }
            } else {
                if (badge) {
                    badge.remove();
                }
            }
        }
    </script>
</head>
<body class="bg-gray-100 h-screen flex">

    <!-- This is a simplified static version of the chat UI for verification -->
    <div class="flex-1 flex flex-col">
        <!-- Header -->
        <div class="h-18 px-6 py-3 bg-white border-b flex justify-between items-center shadow-sm">
            <div class="flex items-center">
                <div>
                    <h3 id="chat-partner-name" class="font-bold text-gray-900 text-lg">Jane Doe</h3>
                </div>
            </div>
            <div class="flex items-center space-x-3">
                 <button onclick="toggleCrmSidebar()" class="btn-soft text-gray-500 hover:text-violet-600 px-3 py-2 rounded-lg hover:bg-gray-100 transition-all" title="Toggle Customer Details">
                    <i class="fas fa-id-card-alt text-xl"></i>
                </button>
            </div>
        </div>

        <!-- Messages Body -->
        <div id="message-container" class="flex-1 overflow-y-auto p-6 space-y-4 bg-slate-50">
            <!-- Normal Message -->
            <div class="flex justify-end items-end gap-1 mb-2">
                <div class="message-bubble message-agent">This is a standard message.<span class="message-timestamp">10:30 AM</span></div>
            </div>

            <!-- Interactive Button Message -->
            <div class="flex justify-end items-end gap-1 mb-2">
                 <div class="message-bubble message-agent" style="width: 300px;">
                    <div class="w-full">
                        <p class="text-base mb-2">Please select an option:</p>
                        <div class="flex flex-col border-t border-white border-opacity-20 -mx-3.5 -mb-2.5">
                            <div class="text-center text-sky-200 cursor-pointer border-t border-white border-opacity-20 py-2.5 px-3 font-medium">Option 1</div>
                            <div class="text-center text-sky-200 cursor-pointer border-t border-white border-opacity-20 py-2.5 px-3 font-medium">Option 2</div>
                        </div>
                    </div>
                 </div>
            </div>

            <!-- Interactive List Message -->
            <div class="flex justify-end items-end gap-1 mb-2">
                 <div class="message-bubble message-agent" style="width: 300px;">
                     <div class="w-full">
                        <div class="mb-2">
                            <p class="font-bold text-sm">Main Menu</p>
                            <p class="text-base">Select from the list below.</p>
                        </div>
                        <div class="border-t border-white border-opacity-20 -mx-3.5 -mb-2.5">
                             <div class="text-center text-sky-200 cursor-pointer border-t border-white border-opacity-20 py-2.5 px-3 font-medium">
                                <i class="fas fa-list mr-2 opacity-70"></i> View Options
                            </div>
                        </div>
                    </div>
                 </div>
            </div>
        </div>

    </div>

    <!-- CRM Sidebar -->
    <div id="crm-sidebar" class="w-80 bg-white border-l p-6">
        <h3 class="text-lg font-bold">Contact Details</h3>
        <textarea id="crm-notes" class="w-full border rounded-md p-2 mt-4" placeholder="Notes..."></textarea>
        <button onclick="saveCrmField('notes')" class="mt-2 bg-violet-600 text-white px-3 py-1 rounded">Save Note</button>
    </div>

</body>
</html>
