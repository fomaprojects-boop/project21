<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="base-url" content="">
    <meta name="user-id" content="">
    <meta name="user-role" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChatMe - Professional Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        body { font-family: 'Inter', sans-serif; } .sidebar { background-color: #0f172a; } /* slate-900 */
        .sidebar-link { transition: all 0.2s ease-in-out; border-left: 3px solid transparent; color: #cbd5e1; } /* slate-300 */
        .sidebar-link:hover { background-color: #1e293b; color: #f8fafc; border-left-color: #8b5cf6; } /* slate-800, slate-50, violet-500 */
        .sidebar-link.active { background: linear-gradient(90deg, rgba(139, 92, 246, 0.1) 0%, rgba(139, 92, 246, 0) 100%); border-left-color: #8b5cf6; color: #fff; font-weight: 600; }
        .modal { transition: opacity 0.3s ease; }
        .conversation-item.active { background-color: #eff6ff; }
        .message-bubble { max-width: 75%; white-space: pre-wrap; word-wrap: break-word; }
        .message-contact { background-color: #ffffff; border: 1px solid #e5e7eb; }
        .message-agent { background-color: #e0e7ff; }
        #page-loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.3s ease;
        }
        .loader {
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .loader .dot {
            width: 15px;
            height: 15px;
            background-color: #3498db;
            border-radius: 50%;
            margin: 0 5px;
            animation: bounce 1.4s infinite ease-in-out both;
        }
        .loader .dot:nth-child(1) { animation-delay: -0.32s; }
        .loader .dot:nth-child(2) { animation-delay: -0.16s; }
        @keyframes bounce {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1.0); }
        }
        .status-Approved, .status-Paid, .status-Sent, .status-Deposited { background-color: #dcfce7; color: #16a34a; }
        .status-Pending, .status-Partially-Paid { background-color: #fef9c3; color: #ca8a04; }
        .status-Submitted, .status-Scheduled { background-color: #dbeafe; color: #3b82f6; }
        .status-Rejected, .status-Unpaid { background-color: #fee2e2; color: #ef4444; }
        .status-Draft { background-color: #e5e7eb; color: #4b5563; }
        [class*="status-Forwarded"] { background-color: #e0e7ff; color: #4f46e5; }
        .status-Partially-Paid { background-color: #fef9c3; color: #854d0e; }
        .status-Scheduled { background-color: #dbeafe; color: #1e40af; }
        .status-Draft { background-color: #e5e7eb; color: #4b5563; }
        .workflow-template-card:hover { transform: translateY(-5px); box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1); transition: all 0.2s ease-in-out;}
        .workflow-node { background-color: white; border: 1px solid #e5e7eb; border-radius: 1rem; padding: 1.25rem; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); width: 300px; text-align: left; position: relative; transition: all 0.2s ease-in-out; cursor: pointer; }
        .workflow-node:hover { transform: scale(1.02); box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1); }
        .workflow-node:active { transform: scale(0.98); }
        .workflow-node.trigger { border-left: 4px solid #fb7185; } .workflow-node.ai_objective { border-left: 4px solid #818cf8; } .workflow-node.action { border-left: 4px solid #34d399; } .workflow-node.condition { border-left: 4px solid #fbbf24; } .workflow-node.question { border-left: 4px solid #3b82f6; }
        .workflow-connector { width: 2px; height: 50px; background-color: #94a3b8; margin: 0 auto; position: relative; }
        .add-node-btn { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 10; opacity: 0; transition: all 0.2s; background-color: white; border-radius: 9999px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .workflow-connector:hover .add-node-btn, .branch-path .workflow-connector:hover .add-node-btn, .workflow-node:hover + .workflow-connector .add-node-btn { opacity: 1; transform: translate(-50%, -50%) scale(1.1); }
        .workflow-branch { display: flex; justify-content: center; gap: 4rem; align-items: flex-start; position: relative; }
        .branch-path { display: flex; flex-direction: column; align-items: center; position: relative; }
        .branch-line-container { position: relative; height: 20px; width: 100%; }
        .branch-line { position: absolute; top: 0; height: 2px; background-color: #94a3b8; }
        .branch-line-left { left: 50%; right: -2rem; } .branch-line-right { right: 50%; left: -2rem; } .branch-line-down { left: 50%; top: 0; width: 2px; height: 100%; }
        .branch-label { font-size: 0.75rem; font-weight: 600; color: #475569; background-color: #f1f5f9; padding: 2px 8px; border-radius: 999px; border: 1px solid #e2e8f0; margin-top: 10px; }
        .workflow-canvas-bg { background-image: radial-gradient(#cbd5e1 1px, transparent 1px); background-size: 1.5rem 1.5rem; }
        /* Old settings tab style removal or override */
        .settings-tab.active-tab { background-color: #f5f3ff; color: #7c3aed; font-weight: 600; }
        /* New Settings Layout Styles */
        .settings-sidebar-btn { text-align: left; width: 100%; padding: 0.75rem 1rem; border-radius: 0.5rem; color: #4b5563; font-weight: 500; transition: all 0.2s; display: flex; align-items: center; }
        .settings-sidebar-btn:hover { background-color: #f3f4f6; color: #111827; }
        .settings-sidebar-btn.active-tab { background-color: #f5f3ff; color: #7c3aed; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); }
        .settings-sidebar-btn i { width: 1.5rem; text-align: center; margin-right: 0.75rem; }

        input:checked ~ .dot { transform: translateX(100%); background-color: #7c3aed; }
        input:checked ~ .block { background-color: #ddd6fe; }

        @keyframes pulsating-loader {
            0% { transform: scale(0.8); box-shadow: 0 0 0 0 rgba(124, 58, 237, 0.7); }
            50% { transform: scale(1); box-shadow: 0 0 0 20px rgba(124, 58, 237, 0); }
            100% { transform: scale(0.8); box-shadow: 0 0 0 0 rgba(124, 58, 237, 0); }
        }
        @keyframes color-change {
            0% { background-color: #7c3aed; }
            25% { background-color: #0ea5e9; }
            50% { background-color: #10b981; }
            75% { background-color: #f59e0b; }
            100% { background-color: #ef4444; }
        }
        .pulsating-circle-loader {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 80px;
        }
        .pulsating-circle-loader div {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            animation: pulsating-loader 2s infinite, color-change 5s infinite alternate;
        }
        @keyframes pulse-bg {
            0% { background-color: #f9fafb; } /* gray-50 */
            50% { background-color: #e5e7eb; } /* gray-200 */
            100% { background-color: #f9fafb; } /* gray-50 */
        }
        .manual-pending-pulse {
            animation: pulse-bg 2s infinite;
        }
        /* Sticky Actions Column */
        .sticky-right {
            position: sticky;
            right: 0;
            background-color: white;
            z-index: 10;
            box-shadow: -2px 0 5px rgba(0,0,0,0.05);
        }
        thead th.sticky-right {
            background-color: #f3f4f6; /* Match gray-100 */
        }
    </style>
    <!-- Facebook SDK for JavaScript -->
    <script>
        window.fbAsyncInit = function() {
            FB.init({
            appId            : '',
            autoLogAppEvents : true,
            xfbml            : true,
            version          : 'v19.0'
            });
        };
    </script>
    <script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js"></script>
</head>
<body class="bg-gray-100 h-screen flex flex-col">
    <div class="flex flex-1 w-full text-white overflow-hidden">
        <main class="flex-1 flex flex-col bg-gray-50 text-gray-800 min-w-0">
            <div id="view-container" class="flex-1 overflow-y-auto">
                <div class="h-full flex flex-col">
    <div id="workflow-main-view" class="p-8 h-full overflow-y-auto">
        <!-- Hero Section -->
        <div class="bg-gradient-to-r from-violet-600 to-indigo-600 rounded-2xl p-8 text-white mb-10 shadow-lg relative overflow-hidden">
            <div class="absolute top-0 right-0 -mt-10 -mr-10 w-64 h-64 bg-white opacity-10 rounded-full blur-3xl"></div>
            <div class="absolute bottom-0 left-0 -mb-10 -ml-10 w-40 h-40 bg-purple-400 opacity-10 rounded-full blur-2xl"></div>
            <div class="flex flex-col md:flex-row justify-between items-center relative z-10">
                <div class="mb-6 md:mb-0">
                    <h2 class="text-3xl font-bold mb-2">Automate Your Business</h2>
                    <p class="text-violet-100 text-lg max-w-xl">Create powerful workflows to handle conversations, sales, and support automatically. Save time and grow faster.</p>
                </div>
                <button class="bg-white text-violet-600 px-6 py-3 rounded-xl hover:bg-violet-50 font-bold shadow-md transition-transform hover:scale-105 flex items-center">
                    <i class="fas fa-plus-circle mr-2 text-xl"></i> Create Workflow
                </button>
            </div>
        </div>

        <!-- Your Workflows Section -->
        <div class="flex justify-between items-center mb-6">
             <h3 class="text-xl font-bold text-gray-800 flex items-center"><i class="fas fa-project-diagram text-violet-500 mr-3"></i>Your Workflows</h3>
        </div>
        <div id="workflows-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12">
            <!-- Mock Workflow Card -->
            <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-all group relative overflow-hidden">
                <div class="absolute top-0 left-0 w-1 h-full bg-violet-500"></div>
                <div class="flex justify-between items-start mb-3">
                    <h4 class="font-bold text-lg text-gray-800 group-hover:text-violet-600 transition-colors truncate pr-2">Welcome Message</h4>
                    <span class="bg-green-100 text-green-700 text-xs font-bold px-2 py-1 rounded uppercase tracking-wide flex-shrink-0">Active</span>
                </div>
                <p class="text-sm text-gray-500 mb-6 flex items-center bg-gray-50 p-2 rounded-lg">
                    <i class="fas fa-bolt text-amber-500 mr-2"></i>
                    <span class="truncate">Trigger: <span class="font-medium text-gray-700">Conversation Started</span></span>
                </p>
                <div class="flex gap-3 mt-auto">
                    <button class="flex-1 bg-white border border-gray-200 text-gray-700 px-3 py-2 rounded-lg font-semibold hover:bg-violet-50 hover:text-violet-600 hover:border-violet-200 transition-colors text-sm flex items-center justify-center">
                        <i class="fas fa-edit mr-2"></i> Edit
                    </button>
                    <button class="flex-none bg-white border border-gray-200 text-gray-400 px-3 py-2 rounded-lg hover:bg-red-50 hover:text-red-500 hover:border-red-200 transition-colors" title="Delete">
                        <i class="fas fa-trash-alt"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Templates Section -->
        <div class="border-t pt-10">
            <div class="flex flex-col mb-6">
                <h3 class="text-xl font-bold text-gray-800 flex items-center"><i class="fas fa-magic text-amber-500 mr-3"></i>Start with a Template</h3>
                <p class="text-gray-500 ml-8 text-sm">Pre-built workflows optimized for conversion and support.</p>
            </div>
            <div id="workflow-templates-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Mock Template Card -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:border-violet-200 hover:shadow-lg transition-all flex flex-col h-full relative group">
                    <div class="mb-4">
                         <div class="w-12 h-12 rounded-lg bg-violet-100 text-violet-600 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform duration-300">
                            <i class="fas fa-file-alt text-xl"></i>
                        </div>
                        <h4 class="font-bold text-lg text-gray-800 mb-2 group-hover:text-violet-600 transition-colors">Lead Qualification</h4>
                        <p class="text-sm text-gray-500 leading-relaxed line-clamp-3">Automatically qualify leads by asking key questions before routing them to an agent.</p>
                    </div>
                    <div class="mt-auto pt-4">
                        <button class="w-full bg-white border-2 border-violet-100 text-violet-600 font-bold py-2.5 rounded-lg hover:bg-violet-600 hover:text-white hover:border-violet-600 transition-all flex justify-center items-center group-hover/btn:shadow-md">
                            <span>Use Template</span> <i class="fas fa-arrow-right ml-2 transform group-hover:translate-x-1 transition-transform"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
            </div>
        </main>
    </div>
</body>
</html>